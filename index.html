<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bip JS</title>
    <link rel="stylesheet" href="src/css/bip.css">
</head>
<style>
    html {
        height: 100%;
    }

    body {
        position: relative;
        margin: 0;
        padding: 0;
        font-family: sans-serif;
        height: 100%;
        background: #fff;
    }

    *, *::before, *::after {
        box-sizing: border-box;
    }

    .wrapper {
        position: relative;
        background: #ecf0f1;
        width: 100%;
        height: 100%;
        overflow: hidden;
    }

    /* Demo styling */
    .overlay {
        position: absolute;
        z-index: 2;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, .6);
        opacity: 0;
        transition: opacity 300ms linear;
        /*transform: scale(.6);*/
        pointer-events: none;
        touch-action: none;
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
    }

    .overlay.is-open {
        opacity: 1;
        /*transform: scale(.5);*/
        cursor: pointer;
        pointer-events: initial;
        touch-action: initial;
        /*width: 80%;*/
    }

    .top,
    .right,
    .bottom,
    .left {
        position: absolute;
        z-index: 1;
        background: #fff;
        padding: 1rem;
        box-shadow: none;
    }

    .top,
    .bottom {
        width: 100%;
        transition: transform 300ms;
    }


    .top.is-open {
        transform: translateY(0);
        z-index: 3;
    }

    .bottom.is-open {
        transform: translateY(1rem) scale(.9);
        z-index: 3;
    }

    .bottom button.is-open {
        transform: translate(-40vw, -100%) scale(1.2);
    }

    .top button,
    .bottom button {
        position: absolute;
        left: calc(50% - 2rem);
        width: 4rem;
    }

    .top {
        top: 0;
        transform: translateY(-100%);
    }

    .top button {
        top: 100%;
    }

    .bottom {
        bottom: 0;
        transform: translateY(calc(100% - 4rem));
        box-shadow: 0 0 10px 0 rgba(0,0,0,.2);
    }

    .bottom button {
        top: 0;
        transform: translateX(0);
        transition: transform 250ms;
    }

    .bottom h1 {
        margin-top: 0;
    }

    .right,
    .left {
        height: 100%;
        width: 50vw;
        max-width: 240px;
        transition: transform 300ms ease-out;
    }

    .right.is-open,
    .left.is-open {
        transform: translateX(0);
        z-index: 3;
    }

    .is-touchmove,
    .is-transitioning {
        z-index: 3;
    }

    .right button,
    .left button {
        position: absolute;
        top: 0;
    }

    .right {
        right: 0;
        transform: translateX(100%);
    }

    .right button {
        right: 100%;
    }

    .left {
        left: 0;
        transform: translateX(-100%);
    }

    .left button {
        left: 100%;
    }

    button {
        margin: .5rem;
        width: 3.6rem;
        height: 3.6rem;
        background: #fff;
        border: 1px solid #ddd;
        text-align: center;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        border-radius: 4px;
        padding: 0;
    }

    .content {
        padding: 4rem 2rem;
        will-change: auto;
        transition: transform 200ms linear 100ms;
        transform: scale(1);
        height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }

    .content.is-open {
        transform: scale(.8);
    }

    .hamburger {
        position: relative;
        display: block;
        width: 40px;
        height: 40px;
    }

    .burger1,
    .burger2,
    .burger3 {
        content: " ";
        display: block;
        position: absolute;
        width: 40px;
        height: 4px;
        transition: opacity 250ms linear, transform 250ms linear;
        border-radius: 4px;
        background-color: #34495e;
    }

    .burger1 {
        top: 50%;
        display: block;
        margin-top: -2px;
        transform: scale(1);
    }

    .burger2 {
        transform: translate(0, 0) rotate(0deg);
        top: calc(50% - 12px);
    }

    .burger3 {
        transform: translate(0, 0) rotate(0deg);
        bottom: calc(50% - 12px);
    }

    .burger1.is-open {
        transform: scale(0);
    }

    .burger2.is-open {
        transform: translate(0, 10px) rotate(-45deg);
    }

    .burger3.is-open  {
        transform: translate(0, -10px) rotate(45deg);
    }

    .arrow {
        position: relative;
        display: block;
        width: 40px;
        height: 40px;
    }

    .arrow1,
    .arrow2 {
        content: " ";
        display: block;
        position: absolute;
        width: 30px;
        height: 4px;
        transition: transform 250ms linear;
        border-radius: 4px;
        background-color: #34495e;
    }

    .arrow1 {
        transform: translate(-25px, 0) rotate(45deg);
        top: 45%;
        left: 50%;
    }

    .arrow2 {
        transform: translate(25px, 0) rotate(-45deg);
        top: 45%;
        right: 50%;
    }

    .arrow1.is-open {
        transform: translate(-25px, 0) rotate(135deg);
    }

    .arrow2.is-open  {
        transform: translate(25px, 0) rotate(-135deg);
    }

    .bottom .arrow {
        transform: rotate(180deg);
    }
</style>
<body>

<div class="wrapper">
    <div class="overlay"></div>
    <div class="top" data-touch data-touch-controllers=".controlTop, .overlay" data-touch-buddies=".content, .arrow1top, .arrow2top">
        <button class="controlTop" type="button">
            <span class="arrow">
                <span class="arrow1 arrow1top"></span>
                <span class="arrow2 arrow2top"></span>
            </span>
        </button>
        <div data-touch-ignore>
            <h1>Top</h1>
            <p>Top details</p>
            <p>Top details</p>
            <p>Top details</p>
        </div>
    </div>
    <div class="right" data-touch data-touch-controllers=".controlRight, .overlay" data-touch-buddies=".burger1Right, .burger2Right, .burger3Right">
        <button class="controlRight" type="button">
            <span class="hamburger">
                <span class="burger1 burger1Right"></span>
                <span class="burger2 burger2Right"></span>
                <span class="burger3 burger3Right"></span>
            </span>
        </button>
        <h1>Right</h1>
        <p>Right details</p>
        <p>Right details</p>
        <p>Right details</p>
    </div>
    <div class="bottom" data-touch data-touch-controllers=".controlBottom, .overlay" data-touch-buddies=".bottombutton, .content, .arrow1bottom, .arrow2bottom">
        <button class="controlBottom" type="button">
            <span class="arrow">
                <span class="arrow1 arrow1Bottom"></span>
                <span class="arrow2 arrow2Bottom"></span>
            </span>
        </button>
        <h1>Bottom</h1>
        <p>Bottom details</p>
        <p>Bottom details</p>
        <p>Bottom details</p>
    </div>
    <div class="left" data-touch data-touch-controllers=".controlLeft, .overlay" data-touch-buddies=".burger1Left, .burger2Left, .burger3Left">
        <button class="controlLeft" type="button">
            <span class="hamburger">
                <span class="burger1 burger1Left"></span>
                <span class="burger2 burger2Left"></span>
                <span class="burger3 burger3Left"></span>
            </span>
        </button>
        <h1>Left</h1>
        <p>Left details</p>
        <p>Left details</p>
        <p>Left details</p>
    </div>
    <div class="content">
        <h1>Center content 2</h1>
        <p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit. Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit. Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit. Donec sed odio dui. Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor. Sed posuere consectetur est at lobortis.</p>
        <p>Cras mattis consectetur purus sit amet fermentum. Donec sed odio dui. Donec ullamcorper nulla non metus auctor fringilla. Curabitur blandit tempus porttitor. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
    </div>
</div>

<!-- loading -->
<script src="src/js/bip.js"></script>

<!-- initialize -->
<script type="text/javascript">
    const bip = new Bip('[data-touch]');

    // const bip2 = new Bip('.top', {
    //     calculator: 'translate'
    // });
    //
    // document.querySelector('.overlay').onclick = function() {
    //     console.log('test');
    //     bip.destroy();
    // }


    // const bip3 = new Bip('.bottom', {
    //     // cssValues: ['opacity', 'width']
    // });

    // const bip4 = new Bip('.right', {
    //     // cssValues: ['opacity', 'width']
    // });

    // console.log(bip);

    // bip.toggle(document.querySelector('[data-touch-id="right"'));
    //
    // function checkSetHeight(e) {
    //     e.target.classList.add('heightCheck');
    //     var style = document.createElement('style');
    //     var ref = document.querySelector('script');
    //     var value = e.target.classList.contains('is-open') ? e.fromValues.height.value : e.toValues.height.value;
    //     style.innerHTML = '.heightCheck { height: ' + value + 'px; }';
    //     style.id = 'addClass';
    //     ref.parentNode.insertBefore(style, ref);
    // }

    // document.addEventListener('bipInit', function (e) {
    //     console.log('bipInit');
    // }, false);
    // document.addEventListener('bipCalculateFrom', function (e) {
    //   console.log('Calculate from', e.detail);
    // }, false);
    // document.addEventListener('bipCalculateTo', function (e) {
    //     console.log('Calculate to', e.detail);
    //   // checkSetHeight(e.detail);
    // }, false);
    // document.addEventListener('bipStartDrag', function (e) {
    //     console.log('Start drag', e.detail);
    // }, false);
    // document.addEventListener('bipMove', function (e) {
    //     console.log('Move', e.detail);
    // }, false);
    // document.addEventListener('bipEndDrag', function (e) {
    //     console.log('End drag', e.detail);
    // }, false);
    // document.addEventListener('bipEnd', function (e) {
    //     console.log('End', e.detail);
    //     // var el = document.getElementById('addClass');
    //     // el.parentNode.removeChild(el);
    // }, false);

</script>
</body>
</html>
